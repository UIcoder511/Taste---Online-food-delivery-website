
<html>
<head>
    
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

   
    
<script>
    if(localStorage.getItem("username"))
        window.location.href='Profile.html';
        
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      
<script type="text/javascript" src="main2.js"></script>
<script type="text/javascript" src="JS/loginsignup.js"></script>
    <script type="text/javascript" src="JS/ResItems.js"></script>
    <script type="text/javascript" src="JS/cart.js"></script>
<link rel="stylesheet" href="CSS/loginsignup.css">
    <link rel="stylesheet" href="CSS/ResItems.css">
     <link rel="stylesheet" href="CSS/gmaps.css">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script type="text/javascript" src="JS/gmaps.js"></script>
       
    <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    
    <style>
    
        #login_btn:hover{
            opacity: 0.7;
        }
        
        #sub:hover{
            opacity: 0.7;
        }
        
        .single-item{
            margin: 20px;
            padding: 20px;  
            box-shadow: 0 0 20px 0px #999;
            transition: 0.1s all;
        }
        
        .single-item:hover{
            transform: scale(1.02);
            cursor: pointer;
        }
        
        .snipcart-thumb{
            font-family: oswald;
            
        }
        
       
        
        #Container-Restaurants{
            margin-top: 110px;
            margin-left: 100px;
            margin-right: 100px;
        }
        
        #totaladd {
             font-family: oswald;
             
            box-shadow: 0px 0px 10px 1px gray;
            border:#dd2600 solid 1px;
             margin-left: 2px;
        }
        #area,#city{
            font-family: oswald;
             margin: 4px;
            margin-left: 20px;
            box-shadow: 0px 0px 10px 1px gray;
            border:#dd2600 solid 1px;
        }
        
        #flat{
            width: 50px;
            font-family: oswald;
            box-shadow: 0px 0px 10px 1px gray;
            border:#dd2600 solid 1px;
            
        }
        aaa{
             font-family: oswald;
             font-size: 18px;
           
        }
        
        .hr{
            
   
    border-top: 2px solid #ccc;
    margin-left: 21px;
    border-color:#dd2600;
        }
        
        
        /* width */
::-webkit-scrollbar {
  width: 3px;
}
        ::-webkit-scrollbar:hover {
  width: 13px;
}

/* Track */
::-webkit-scrollbar-track {
  box-shadow: inset 0 0 5px grey; 
  border-radius: 10px;
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: red; 
  border-radius: 10px;
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: #b30000;
    width: 10px;
}
        
        
        .show-cart li {
  display: flex;
           
}
.card {
  margin-bottom: 20px;
    
}
.card-img-top {
  width: 200px;
  height: 200px;
  align-self: center;
}
        
        .font{
            font-family: oswald;
        }
        
        .total-cart{
            font-family: oswald;
            font-size: 18px;

        }
        
        .modal-title
        {
            font-size: 25px;
            color: #dd2600;
            margin-left: 370px;
        }
        
        .total{
            font-size: 22px;
          
        }
        
        
        .modal-header
        {
            border-bottom: solid #eeeeee 2px;
          
        }
        
        .btn-primary{
            background: #dd2600;
        }
        
        .btn-secondary:hover{
            background: white;
            opacity: 0.7;
        }
        
        .btn-primary:hover{
            opacity: 0.7;
            background: #dd2600;
        }
        
        .close{
            margin-left: 330px;
        }
        
        #cart-button{
            font-family: oswald;
              display: block;
	margin-right:100px;
            margin-top: -57px;
	padding: 2px 25px;
	text-decoration: none;
	border-radius: 60px;
  line-height: 43px;
  color: #FFF;
	-webkit-transition: all 0.30s ease-in-out;
  	-moz-transition: all 0.30s ease-in-out;
  	-ms-transition: all 0.30s ease-in-out;
  	-o-transition: all 0.30s ease-in-out;
        }
        
        #clear-cart-button{
             display: block;
	margin-right:100px;
	padding: 2px 25px;
	text-decoration: none;
	border-radius: 60px;
  line-height: 45px;
  color: #FFF;
	-webkit-transition: all 0.30s ease-in-out;
  	-moz-transition: all 0.30s ease-in-out;
  	-ms-transition: all 0.30s ease-in-out;
  	-o-transition: all 0.30s ease-in-out;
        }
    
        td{
            font-family: oswald;
            
        }
        
        .plus-item,.minus-item{
            background: white;
            font-size: 20px;
            
        }
        
        .plus-item:hover,.minus-item:hover{
           
            opacity: 0.7;
        }
        
        #dolor{
            font-size: 16px;
            float: left;
            margin-top: -1px;
         
        }
        
        .fnt{
            font-size: 12px;
            font-family: oswald;
        }
        
        i{
            color: white;
            margin-right: 5px;
        }
        
        
        
        
        
 /*SEARCH FORM*/
.search-form {
    border-radius: 30px 0px 0px 30px;
   
    /*border-radius:Top-left, Top-right, Bottom-right, Bottom-left;*/
}
/*to cange only one form and not all give unique class name like  class="search-form" */
 .search-btn {
    border-radius: 0px 30px 30px 0px;
    cursor:pointer;
}
        
        
input[type="search"] {
  box-sizing: border-box;
}

.searchbox-container {
 
    margin-top: -18px;
  height: 50px;
  display: inline-block;
   
   
}

.searchbutton, .searchbox {
  -webkit-appearance: none;
  -moz-appearance: none;
  -ms-appearance: none;
  -o-appearance: none;
  appearance: none;
  box-sizing: border-box;
  transition: background-color, 0.3s;
  font-size: 20px;
  line-height: 1;
    font-family: oswald;
  color: #999;
  border-radius: 0;
  float: left;
  border: none;
  height: 50px;
  
}

input[type="search"] {
  border-radius: 100px 0 0 100px;
  -webkit-appearance: none;
}

.searchbox {
  padding: 0px 20px;
     border: 1px solid #ddd;
   
}

.searchbox:focus {
  outline: thin dotted;
  outline-offset: -1px;
}
.searchbox.placeholder {
  color: #aaa;
 
    
}
.searchbox:-moz-placeholder {
   color: #aaa;
}
.searchbox::-moz-placeholder {
  color: #aaa;
}
.searchbox:-ms-input-placeholder {
  color: #aaa;
}
.searchbox::-webkit-input-placeholder {
  color: #aaa;
}

.searchbutton {
  width: 50px;
  padding: 0;
 
  border-left: 1px solid #dd2600;
  border-radius: 0 100px 100px 0;
  background: #dd2600;
}
.searchbutton:hover, .searchbutton:focus {
  opacity: 0.7;
  outline: thin dotted;
  outline-offset: -1px;
    
}
.searchbutton:active {
  color: #dd2600;
}

.example {
  width: 20%;
  position: absolute;
  top: 40%;
  margin-left: 200px;
}

    </style>
    
    
    
</head>
<body>
	<div class="main ">
        
        
        <!------------------Login/Signup------------------------------------------------------------------>
        <div class="main-nav">
          
        <div id="logo"><a id="aa"  href="Profile.html"><img src="https://firebasestorage.googleapis.com/v0/b/taste-511.appspot.com/o/Logo%2FTasteLogo.jpg?alt=media&token=b922f9b4-66dd-4e35-b841-425062c0be5e" width="60px" style="margin: 7px;margin-left: 30px;" ></a></div>
            
        
<div class="example">
  <form class="searchbox-container" >
      <input type="search" class="searchbox" autocomplete="off" id="ser" />
      <button type="button" class="searchbutton" onclick="Usearch()"><i class="fa fa-search"></i></button>
  </form>
</div>
           
        <div class="btns">
	       <ul> 
              
               <li class="lii"><a class="login" href="#0" id="ss" >Login</a></li>
             <li><button type="button" class="btn btn-primary" id="cart-button" data-toggle="modal" data-target="#cart">Cart (<span class="total-count"></span>)</button></li>
         <!--   <li class="lii">  <button class="clear-cart btn btn-danger" id="clear-cart-button">Clear Cart</button></li>    -->
	       </ul>
        </div>
        </div>
        
        
        
  
        
      

        <div class="user-modal">
		<div class="user-modal-container">
			<ul class="switcher">
				<li id="sn"><a href="#0">Sign in</a></li>
				<li><a href="#0">New account</a></li>
               
			</ul>
        

          <!------------------Login------------------------------------------------------------------>  
			<div id="login">
				<form class="form">
					<p class="fieldset">
						<label class="image-replace email" for="signin-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signin-email" type="email" placeholder="E-mail">
						<span class="error-message">An account with this email address does not exist!</span>
					</p>

					<p class="fieldset">
						<label class="image-replace password" for="signin-password">Password</label>
						<input class="full-width has-padding has-border" id="signin-password" type="password"  placeholder="Password">
						<a href="#0" class="hide-password">Show</a>
						<span class="error-message">Wrong password! Try again.</span>
					</p>

					

					<p class="fieldset">
						<input class="full-width" type="submit" id="login_btn" value="Login" onclick="login()">
					</p>
				</form>

				<p class="form-bottom-message"><a href="#0">Forgot your password?</a></p>
				<!-- <a href="#0" class="close-form">Close</a> -->
			</div>

            
            <!------------------Signup------------------------------------------------------------------>
			<div id="signup" >
				<form class="form" >
					<p class="fieldset">
						<label class="image-replace username" for="signup-username">Username</label>
						<input class="full-width has-padding has-border" id="signup-username" type="text" placeholder="Name">
						<span class="error-message">Your username can only contain numeric and alphabetic symbols!</span>
					</p>

					<p class="fieldset">
						<label class="image-replace email" for="signup-email">E-mail</label>
						<input class="full-width has-padding has-border" id="signup-email" type="email" placeholder="E-mail">
						<span class="error-message">Enter a valid email address!</span>
					</p>

					<p class="fieldset">
						<label class="image-replace password" for="signup-password">Password</label>
						<input class="full-width has-padding has-border" id="signup-password" type="password"  placeholder="Password">
						<a href="#0" class="hide-password">Show</a>
						
					</p>

					

					<p class="fieldset">
						<input class="full-width has-padding" type="submit" id="sub" onclick="signup()" value="Create account">
					</p>
				</form>

				<!-- <a href="#0" class="cd-close-form">Close</a> -->
			</div>
            
            
            
            
            
            
            <!------------------Password Reset------------------------------------------------------------------>

			<div id="reset-password">
				<p class="form-message">Lost your password? Please enter your email address.</br> You will receive a link to create a new password.</p>

				<form class="form">
					<p class="fieldset">
						<label class="image-replace email" for="reset-email">E-mail</label>
						<input class="full-width has-padding has-border" id="reset-email" type="email" placeholder="E-mail">
						<span class="error-message">An account with this email does not exist!</span>
					</p>

					<p class="fieldset">
						<input class="full-width has-padding" type="submit" value="Reset password" onclick="re()">
					</p>
				</form>

				<p class="form-bottom-message"><a href="#0">Back to log-in</a></p>
			</div>
			<a href="#0" class="close-form">Close</a>
		</div>
	</div>
    
    
    


<!------------------Firebase------------------------------------------------------------------>

		<!--div id="recaptcha-container" class="recaptcha-container"></div-->
  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-database.js"></script>

<script>
  // Initialize Firebase
  var config = {
      
    apiKey: "AIzaSyBcZtlVRDsiZNoYhFuCTnLyhQvPCGoR8rc",
    authDomain: "taste-511.firebaseapp.com",
    databaseURL: "https://taste-511.firebaseio.com",
    projectId: "taste-511",
    storageBucket: "taste-511.appspot.com",
    messagingSenderId: "179496115918"
      
  };
  firebase.initializeApp(config);
</script>

   
    
    
    

	

   <div id="Container-Restaurants">
       
       <div class="titles" style="font-size: 30px;font-family: oswald;margin-left: 20px;">Restaurants</div>
       <hr class="hr" >
     <!--  <add key="webpages:Enabled" value="true" />
      
    <input type="file" accept="image/*" capture="camera" id="cameraInput">
    
    <script>
    
  let fileUpload = document.getElementById("cameraInput")
  
  fileUpload.addEventListener('change', function(evt) {
      let storageRef = firebase.storage().ref('new');
      let firstFile = evt.target.files[0]; // upload the first file only
      let uploadTask = storageRef.child(evt.target.files[0].name).put(firstFile)
      .then(snapshot => {
       snapshot.ref.getDownloadURL().then(function(downloadURL) {
    console.log('File available at', downloadURL);
  });  // Will return a promise with the download link
   })
      });
  
        
    </script-->
       
       
       
    <div id='Restaurants'>
        
    
    </div>
       
       <!---------------------------Loacation--------------------
     
<button type="button" id="gmaps">Location</button>

<div id="myModalmap" class="modalmap">


  <div class="modal-contentmap">
    <span class="closemap">&times;</span>
    <div id="map" ></div>   
  </div>

</div>
    
       <script>
      // Note: This example requires that you consent to location sharing when
      // prompted by your browser. If you see the error "The Geolocation service
      // failed.", it means you probably did not give permission for the browser to
      // locate you.
      var map, infoWindow;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 6
        });
        infoWindow = new google.maps.InfoWindow;

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent('Location found.');
            infoWindow.open(map);
            map.setCenter(pos);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBqFI0Fxa0_CgY-JO1j9vYjcbZcfWC4DwQ&callback=initMap">
    </script>
       
    <script>
 // Get the modal
var modal2 = document.getElementById('myModalmap');

// Get the button that opens the modal
var btn2 = document.getElementById("gmaps");

// Get the <span> element that closes the modal
var span2 = document.getElementsByClassName("closemap")[0];

// When the user clicks the button, open the modal 
btn2.onclick = function() {
  modal2.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span2.onclick = function() {
  modal2.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal2) {
    modal2.style.display = "none";
  }
}
       </script>

       
       <!----------------------------------------------------------------------------->
       
       
       
       
       
        <script>
            localStorage.setItem("Restaurant","null");
            
            var r=document.getElementById("Restaurants");
            
            var i=0;
            //for(i=0;i<6;i++)
 
            
            var ref = firebase.database().ref("Users/Restaurants");

                            ref.once("value", function(snapshot){
                                // Contains all data from Firebase
                               // var data = snapshot.val();
                               // var dates = Object.keys(snapshot);
                                 //   console.log("dates : "+ dates);
                                console.log(snapshot.val());
                                 var j=0;
                                
                                
                                        
                                    
                                snapshot.forEach(function(childSnapshot) {
                                   // console.log(JSON.stringify(childSnapshot.val()));
                                   //   console.log(childSnapshot.val());
                                      //console.log(  Object.keys(childSnapshot.val()));
                                   // sessionStorage.setItem("username",UName);
                                    
                                    
                                   if((childSnapshot.val().Verified)==("true"))
                                    {
                                        
                                        
                                        var JSONdata=JSON.stringify(childSnapshot.val());
                                    var name=(childSnapshot.val().Name);
                                  //for(i=0;i<3;i++)  
                                    
                                     r.innerHTML=r.innerHTML+" <div class='col-md-2 top_brand_left single-item' id=\"btn\" pid="+/*JSONdata*/name+" ><div class='hover14 column'><div class='agile_top_brand_left_grid'><div class='agile_top_brand_left_grid1'> <figure><div class='snipcart-item block' ><div class='snipcart-thumb'></div><div class='snipcart-details top_brand_home_details'></div></div></figure></div></div> </div></div>"
                                     var container=document.getElementsByClassName('single-item');
                                    // var btn=document.getElementById('btn');
                                    
                                     //btn.value=JSONdata;
                                     
                                     var img=document.getElementsByClassName('snipcart-thumb')[j++];
                                     var imgtag = document.createElement("img");
                                     var Rname=document.createElement("H2");
                                     var Rratings=document.createElement("img");
                                     var RDT=document.createElement("H6");  
                                    
                                 
                                     Rname.innerHTML=childSnapshot.val().Name;
                                        
                                      Rratings.setAttribute("src",childSnapshot.val().Ratings);
                                      Rratings.setAttribute("height", "25px");
                                    
                                        
                                     RDT.innerHTML=childSnapshot.val().DeliveryTime    
                                        
                                     imgtag.setAttribute("src",childSnapshot.val().DP);
                                     imgtag.setAttribute("height", "150px");
                                     imgtag.setAttribute("width", "150px");
                                     imgtag.style.display = "block";
                                     imgtag.style.margin = "0 auto";
                                 
                                        
                                     img.appendChild(imgtag);
                                     img.appendChild(Rname);
                                     img.appendChild(Rratings);
                                     img.appendChild(RDT);
                                        
                                        
                                        
                                    }
                                    
                                   
                                   
                                        });
                           
                               
                            });
            
            
               
                  
            
           
        
        </script>
        
</div>
    
    <!---on search-------------------------------------------------------------->
    
    
    
     <script>
        
         function Usearch()
         {
             
        
         
            var r=document.getElementById("Restaurants");
            r.innerHTML=null;
         
            var i=0;
            //for(i=0;i<6;i++)
 
            var key=document.getElementById('ser').value;
         console.log(key);
             
             
             var ref = firebase.database().ref("Users/Restaurants");

                            ref.once("value", function(snapshot){
                                // Contains all data from Firebase
                               // var data = snapshot.val();
                               // var dates = Object.keys(snapshot);
                                 //   console.log("dates : "+ dates);
                                console.log(snapshot.val());
                                 var j=0;
                                
                                
                                        
                                    
                                snapshot.forEach(function(childSnapshot) {
                                   // console.log(JSON.stringify(childSnapshot.val()));
                                   //   console.log(childSnapshot.val());
                                      //console.log(  Object.keys(childSnapshot.val()));
                                   // sessionStorage.setItem("username",UName);
                                   var JSONdata=JSON.stringify(childSnapshot.val());
                                    var name=(childSnapshot.val().Name);
                                  //for(i=0;i<3;i++)  
                                    
                                    if((name.toUpperCase()).includes(key.toUpperCase()))
                                       // console.log(name);
                                    {
                                        
                                        r.innerHTML=r.innerHTML+" <div class='col-md-2 top_brand_left single-item' id=\"btn\" pid="+/*JSONdata*/name+" ><div class='hover14 column'><div class='agile_top_brand_left_grid'><div class='agile_top_brand_left_grid1'> <figure><div class='snipcart-item block' ><div class='snipcart-thumb'></div><div class='snipcart-details top_brand_home_details'></div></div></figure></div></div> </div></div>"
                                     var container=document.getElementsByClassName('single-item');
                                    // var btn=document.getElementById('btn');
                                    
                                     //btn.value=JSONdata;
                                     
                                     var img=document.getElementsByClassName('snipcart-thumb')[j++];
                                     var imgtag = document.createElement("img");
                                     var Rname=document.createElement("H2");
                                     var Rratings=document.createElement("img");
                                     var RDT=document.createElement("H6");  
                                    
                                 
                                     Rname.innerHTML=childSnapshot.val().Name;
                                        
                                      Rratings.setAttribute("src",childSnapshot.val().Ratings);
                                      Rratings.setAttribute("height", "25px");
                                    
                                        
                                     RDT.innerHTML=childSnapshot.val().DeliveryTime    
                                        
                                     imgtag.setAttribute("src",childSnapshot.val().DP);
                                     imgtag.setAttribute("height", "150px");
                                     imgtag.setAttribute("width", "150px");
                                     imgtag.style.display = "block";
                                     imgtag.style.margin = "0 auto";
                                 
                                        
                                     img.appendChild(imgtag);
                                     img.appendChild(Rname);
                                     img.appendChild(Rratings);
                                     img.appendChild(RDT);
                                        
                                        
                                        
                                        
                                        
                                    }
                                 
                                   
                                        });
                           
                               
                            });
            
             
             
            
         }
                  
            
           
        
        </script>
    
    
    
    
    
    
    
    
    
    
    
<!-- The Modal Restaurants Items -->
    
<div id="myModal" class="modal-res">

  <!-- Modal content -->
    
  <div class="modal-content-res">
      
      <div id="itms"></div>  
      <div class="close-res">&times;</div>
   
  </div>

</div>
   
    <script>
        
 var span = document.getElementsByClassName("close-res")[0];
 var modal = document.getElementById('myModal');
// When the user clicks the button, open the modal 

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
    var r=document.getElementById("itms"); 
     $("body").removeClass("modal-open")
    r.innerHTML="";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
      var r=document.getElementById("itms"); 
       $("body").removeClass("modal-open")
      r.innerHTML="";
  }
}
    
            $("body").delegate("#btn","click",function(event){
                                        var ResId=$(this).attr('pid');
                                  console.log(ResId);
       
                
                $("body").addClass("modal-open");
                
                var r=document.getElementById("itms"); 
                var q=1;
                            r.innerHTML="<div><div id=\"Category\"><h2 id=\"catTitle\">Cateogory</h2><ul></ul></div><div id=\"all\"><div id=\"foods\"><ul></ul></div><div id=\"price-con\"><div id=\"prices\"><ul></ul></div></div><div id=\"btn-con\"><div id=\"btns\"><ul></ul></div></div></div></div>";
                            var refCat = firebase.database().ref("Users/Restaurants/"+ResId+"/Category");
                               var x=1;         
                                        refCat.on("value", function(snapshot)
                                        {
                                             //console.log(snapshot.val().);
                                                    snapshot.forEach(function(childSnapshot)
                                                    {
                                                        var catkey=childSnapshot.key;
                                                         //var r=document.getElementById("itms");  
                                                        // console.log(catkey);
                                                        
                                                        
                                                         var catt=document.getElementById('Category');
                                                                var lili=document.createElement('li');
                                                                var aa=document.createElement('a');
                                                                aa.setAttribute('href','#'+x)
                                                                 x++;
                                                                catt.appendChild(aa);
                                                                aa.appendChild(lili);
                                                                lili.innerHTML=lili.innerHTML+ childSnapshot.val();
                                                       
                                                         var fodcat=document.getElementById('foods');
                                                    //    var licat=document.createElement('li');
                                                      //  licat.setAttribute('id',x);
                                                    //    fodcat.appendChild(licat);
                                                      //  licat.innerHTML=licat.innerHTML+childSnapshot.val();
                                                        
                                                        //console.log('First');
                                                            var first=0;
                                                            var refI = firebase.database().ref("Users/Restaurants/"+ResId+"/Items");
                                                           
                                                           refI.orderByChild("Category").on("value", function(snapshot1)
                                        {
                                          //   console.log(snapshot.val().);
                                                              // console.log('1');
                                                    snapshot1.forEach(function(childSnapshot1)
                                                    {
                                                    
                                                        
                                                         var r=document.getElementById("itms");  
                                                       // r.innerHTML="";
                                                        if(childSnapshot1.val().Category==catkey)
                                                            { var plzprint=0;
                                                            
                                                            //   console.log(childSnapshot1.val().Name);
                                                                var fod=document.getElementById('foods');
                                                             
                                                            // var 
                                                             var btnss=document.getElementById('btns');
                                                             var prices=document.getElementById('prices');
                                                             
                                                            var liname=document.createElement('li');
                                                             var liprice=document.createElement('li');
                                                             
                                                                var brk=document.createElement('br');
                                                                var Button=document.createElement('input');
                                                                Button.setAttribute('type','Button');
                                                               // Button.setAttribute('id','addtoc');
                                                             //Button.setAttribute('id','addToCart');
                                                               Button.setAttribute('class','add-to-cart');
                                                               Button.setAttribute('nam',childSnapshot1.val().Name);
                                                               Button.setAttribute('ResID',ResId);
                                                               Button.setAttribute('price',childSnapshot1.val().Price);
                                                              Button.addEventListener("click", my);
                                                             
                                                           /*  $("body").delegate("#addtoc","click",function(event)
                                                                                        {
                                                                 my();
                                                             });
                                                             
                                                          //   my();*/
                                                                
                                                                if(first==0)
                                                                    {
                                                                      
                                                                        liname.setAttribute('id',q);
                                                                        first=1;
                                                                        q++;
                                                                        console.log(liname.getAttribute('id')+liname.innerHTML);
                                                                        plzprint=1;
                                                                    }
                                                                    
                                                                
                                                                fod.appendChild(liname);
                                                                prices.appendChild(liprice);
                                                    
                                                                btnss.appendChild(Button);
                                                                btnss.appendChild(brk);
                                                                
                                                                liname.innerHTML=liname.innerHTML +childSnapshot1.val().Name;
                                                                liprice.innerHTML=liprice.innerHTML+childSnapshot1.val().Price+"$";
                                                               // if(plzprint)
                                                                 //  console.log(liname.innerHTML); 
                                                            }
                                                            
                                                                
                                                            
                                                    });
                                         });
                                                        
                                                       // console.log("____________________________________");
                                                        
                                                            //var fod=document.getElementById('foods');
                                                        
                                                            //var li=document.createElement('li');
                                                            
                                                            //li.innerHTML=childSnapshot.val().Name +"       "+childSnapshot.val().Price;
                                                            
                                                          //  fod.appendChild(li);
                                                                
                                                            
                                                    });
                                         });
                
                                        modal.style.display = "block";
                                        
        
                                    
                                    });
        <!-----Cart------------------------------------------------------------>
           
            
 
            
            
            
            
            
            
            
                
    function my()
        {
             var ResID =this.getAttribute('ResID');
             if((localStorage.getItem("Restaurant"))=="null") 
                 {
                     localStorage.setItem("Restaurant",ResID);
                 }
            else
                {
                     if((localStorage.getItem("Restaurant"))==ResID) 
                     {
                         event.preventDefault();
                         var name =this.getAttribute('nam');
                         var price = Number(this.getAttribute('price'));
                         shoppingCart.addItemToCart(name, price, 1);
                         displayCart();
                         console.log(name+" "+price);
                     }
                    else{
                        window.alert('Remove Other Restaurant item first');
                    }
                }
            
        
  
        }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
       
        
    </script>
    <script src="JS/cart.js"></script>
   <!-- The Modal Restaurants Items --> 
    
    <script src="https://www.paypal.com/sdk/js?client-id=ASu8vgto2ji-HKe7HHs9zfRsjVbIm6E2vg1hL2cOjJQgR5wbQZ-ICBSaCV3zR8a_HPhXioCvpJ3dKx3n&currency=CAD"></script>

           
 <!-- Modal -->
<div class="modal fade" id="cart" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title font" id="exampleModalLabel">Cart</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="show-cart table">
          
        </table>
        <div><h2 class="font total">Total price: </h2><h2 id="dolor">$</h2><span class="total-cart"></span></div>
          <hr>
          
    
      <div id="address">
          <aaa>Address</aaa><br><br>
          
          <div id="address-cotainer">
             <h class="fnt">FlatNo</h> &nbsp;&nbsp;
              <input type="text" id="flat"><br>
              <h class="fnt">Area</h>
              <input type="text" id="area"><br>
              <h class="fnt">City</h>
              <input type="text" id="city"><br>
                <h class="fnt">Address</h>
              <input type="text" id="totaladd"><br><br>
              <h class="fnt"> Cash on Delivery</h>&nbsp; <input type="radio" name="typ" id="cash">&nbsp;&nbsp;
              <h class="fnt"> Paypal</h>&nbsp;&nbsp;<input type="radio" name="typ" id="payp" checked>
          </div>
          
       </div>
          
      </div>
        
      <div class="modal-footer" id="footer">
        <!--button type="button" class="btn btn-secondary font" data-dismiss="modal">Close</button-->
          <button type="button"  class="btn btn-secondary font clear-cart" >Clear Cart</button>
        
          
          
          <div id="errorTotal" style="color: #dd2600;font-family: oswald;font-size: 20px;"> Login To Checkout </div>

         
      </div>
        
    </div>
  </div>
</div> 
  
    
    
    
    





<script>
console.log('ho');
    
   var Json;   
    var mtotal=0;
  
    var tempTotal,tempLeft;
    
    var rad = document.getElementsByName('typ');

         
           // ************************************************
// Shopping Cart API
// ************************************************

var shoppingCart = (function() {
  // =============================
  // Private methods and propeties
  // =============================
  cart = [];
  
  // Constructor
  function Item(name, price, count) {
    this.name = name;
    this.price = price;
    this.count = count;
  }
  
  // Save cart
  function saveCart() {
    sessionStorage.setItem('shoppingCart', JSON.stringify(cart));
      console.log(JSON.stringify(cart));
      Json=JSON.stringify(cart);
  }
  
    // Load cart
  function loadCart() {
    cart = JSON.parse(sessionStorage.getItem('shoppingCart'));
  }
  if (sessionStorage.getItem("shoppingCart") != null) {
    loadCart();
  }
  

  // =============================
  // Public methods and propeties
  // =============================
  var obj = {};
  
  // Add to cart
  obj.addItemToCart = function(name, price, count) {
    for(var item in cart) {
      if(cart[item].name === name) {
        cart[item].count ++;
        saveCart();
        return;
      }
    }
    var item = new Item(name, price, count);
    cart.push(item);
    saveCart();
  }
  // Set count from item
  obj.setCountForItem = function(name, count) {
    for(var i in cart) {
      if (cart[i].name === name) {
        cart[i].count = count;
        break;
      }
    }
  };
  // Remove item from cart
  obj.removeItemFromCart = function(name) {
      for(var item in cart) {
        if(cart[item].name === name) {
          cart[item].count --;
          if(cart[item].count === 0) {
            cart.splice(item, 1);
          }
          break;
        }
    }
    saveCart();
  }

  // Remove all items from cart
  obj.removeItemFromCartAll = function(name) {
    for(var item in cart) {
      if(cart[item].name === name) {
        cart.splice(item, 1);
        break;
      }
    }
    saveCart();
  }

  // Clear cart
  obj.clearCart = function() {
    cart = [];
    saveCart();
  }

  // Count cart 
  obj.totalCount = function() {
    var totalCount = 0;
    for(var item in cart) {
      totalCount += cart[item].count;
    }
    return totalCount;
  }

  // Total cart
  obj.totalCart = function() {
    var totalCart = 0;
    for(var item in cart) {
      totalCart += cart[item].price * cart[item].count;
    }
     
      
    return Number(totalCart.toFixed(2));
  }

  // List cart
  obj.listCart = function() {
    var cartCopy = [];
    for(i in cart) {
      item = cart[i];
      itemCopy = {};
      for(p in item) {
        itemCopy[p] = item[p];

      }
      itemCopy.total = Number(item.price * item.count).toFixed(2);
    
      cartCopy.push(itemCopy)
    }
    return cartCopy;
  }

  // cart : Array
  // Item : Object/Class
  // addItemToCart : Function
  // removeItemFromCart : Function
  // removeItemFromCartAll : Function
  // clearCart : Function
  // countCart : Function
  // totalCart : Function
  // listCart : Function
  // saveCart : Function
  // loadCart : Function
  return obj;
})();


// *****************************************
// Triggers / Events
// ***************************************** 
// Add item
   
    
    
  var cashond=document.getElementById('payp');
  //  cashond.checked
    
    console.log('ho');
    // Clear items
$('.clear-cart').click(function() {
  shoppingCart.clearCart();
  displayCart();
});
    
    /*
    
    
    $('.order-now').click(function() {
 // console.log(Json);
        mtotal=0;
        for(i in cart)
            {
                mtotal=mtotal+cart[i].price*cart[i].count;
               // console.log(cart[i].name+" "+cart[i].price+"*"+cart[i].count);
                console.log(mtotal);
            }
});

*/
      
    
function displayCart() {
  var cartArray = shoppingCart.listCart();
  var output = "";
  for(var i in cartArray) {
      
    output += "<tr>"
      + "<td>" + cartArray[i].name + "</td>" 
      + "<td>(" + cartArray[i].price + ")</td>"
      + "<td><div class='input-group'><button class='minus-item input-group-addon btn btn-primary' data-name='" + cartArray[i].name + "'>-</button>"
      + "<input type='number' class='item-count form-control' data-name='" + cartArray[i].name + "' value='" + cartArray[i].count + "'>"
      + "<button class='plus-item btn btn-primary input-group-addon' data-name='" + cartArray[i].name + "'>+</button></div></td>"
      + "<td><button class='delete-item btn btn-danger' data-name='" + cartArray[i].name + "'>X</button></td>"
      + " = " 
      + "<td>" + cartArray[i].total + "</td>" 
      +  "</tr>";
      
  }
    mtotal=shoppingCart.totalCart();
    tempTotal=mtotal;
    tempLeft=0;
    console.log(mtotal);
    //checkT();  
  $('.show-cart').html(output);
  $('.total-cart').html(shoppingCart.totalCart());
  $('.total-count').html(shoppingCart.totalCount());
}

// Delete item button

$('.show-cart').on("click", ".delete-item", function(event) {
   // console.log(name)
  var name = $(this).data('name')
  shoppingCart.removeItemFromCartAll(name);
  displayCart();
})


// -1
$('.show-cart').on("click", ".minus-item", function(event) {
  var name = $(this).data('name')
 // console.log(name)
  shoppingCart.removeItemFromCart(name);
  displayCart();
})
// +1
$('.show-cart').on("click", ".plus-item", function(event) {
   // console.log(name)
  var name = $(this).data('name')
  shoppingCart.addItemToCart(name);
  displayCart();
})

// Item count input
$('.show-cart').on("change", ".item-count", function(event) {
   var name = $(this).data('name');
   var count = Number($(this).val());
  shoppingCart.setCountForItem(name, count);
  displayCart();
});
   

    displayCart();
    
    
    
for (var i = 0; i < rad.length; i++) {
    rad[i].addEventListener('change', function() {
        
        console.log(this.id);
        
        if(this.id=='cash')
            {
                tempTotal=mtotal*0.1;
                tempLeft=mtotal-tempTotal;
            }
        else
            {
                tempTotal=mtotal;
                tempLeft=0;
                //console.log(tempTotal);
            }
            console.log(tempTotal+"\n"+tempLeft);
           
    });
}
   
    
</script>

    
    










</body>
</html>
